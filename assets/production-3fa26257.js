import{u as V}from"./useData-b30b62b8.js";import{_ as U,r as c,x as te,c as l,d as m,e,t as j,A as oe,s as ie,g as T,o as W,i as r,j as se,k as ne,b as A,h as f,l as S,q as N,w as k,F as R,f as z,p as O,B as ae,n as le}from"./index-28ae638b.js";const ce={class:"moveHead"},de={class:"content"},re={__name:"moveBox",props:{title:{type:String,default:"这是标题"}},emits:["isClose"],setup(b,{emit:p}){const{store:o}=V(),I=p,_=c(),w=c(600),u=c(200),L=te(()=>({left:`${w.value}px`,top:`${u.value}px`})),v=c(0),M=c(0),x=()=>{I("isClose",!1)},a=c(!1),E=s=>{const y=_.value.getBoundingClientRect();v.value=s.clientX-y.left,M.value=s.clientY-y.top,a.value=!0},Z=s=>{a.value&&(w.value=(s.clientX-v.value)/o.state.scale.width,u.value=(s.clientY-M.value)/o.state.scale.height)},C=s=>{a.value=!1},G=s=>{a.value=!1};return(s,y)=>(l(),m("div",{class:"moveBox",style:ie(L.value),ref_key:"box",ref:_,onMousedown:E,onMousemove:Z,onMouseout:C,onMouseup:G},[e("div",ce,j(b.title),1),e("div",{class:"close",onClick:x}," x "),e("div",de,[oe(s.$slots,"default",{},void 0,!0)])],36))}},pe=U(re,[["__scopeId","data-v-a46d9474"]]);const ue={class:"video"},me=["src"],ve={__name:"VideoModal",props:{videoSrc:{type:String}},setup(b){T();const p=c();return W(()=>{p.value.play()}),(o,I)=>(l(),m("div",ue,[e("video",{class:"videoContainer",ref_key:"videoContainer",ref:p,src:b.videoSrc},null,8,me)]))}},he=U(ve,[["__scopeId","data-v-bd55396f"]]);const ge={class:"map-container"},fe={class:"menu-left"},_e={class:"left-head-container"},xe={class:"equipment-box"},ye={class:"content"},Ae=["src"],ke={ref:"echart1",style:{width:"360px",height:"150px"}},be={class:"left-head-container",style:{"margin-top":"16px"}},Ie={class:"title-box",style:{margin:"8px 20px 0 20px"}},we={class:"bottom-chart"},Me={class:"rank-box"},Ge={ref:"echart2",class:"each-chart"},Ye={class:"menu-right"},De={class:"right-head-container"},Se=["src"],je={class:"carousel-text"},Le={class:"content"},Ee=["src"],Ze={class:"right-head-charts"},Ce={__name:"production",setup(b){const{proxy:p}=T(),{getImg:o,weather:I,echarts:_,serve:w,map:u,mTime:L,store:v,pieActive:M}=V(),x=c(null),a=c(!1),E=r([{location:"龙泉驿区",lngLat:[104.27536,30.556808],img:"fwwd.png",phone:"15394612646",specificLocaltion:"四川省成都市龙泉驿区"},{location:"龙泉街道办",lngLat:[104.265402,30.562251],type:2,online:1,src:"http://159.75.169.224:7300/video.mp4",img:"excel_11.png",phone:"15394613646",specificLocaltion:"四川省成都市龙泉街道办事处"},{location:"洛带古镇",lngLat:[104.328033,30.635452],type:2,online:1,img:"excel_12.png",src:"http://159.75.169.224:7300/video.mp4",phone:"15395613646",specificLocaltion:"洛带古镇"},{location:"十陵镇",lngLat:[104.172438,30.645829],type:1,online:1,src:"http://159.75.169.224:7300/video.mp4",img:"excel_13.jpg",phone:"15294613646",specificLocaltion:"四川省成都市十陵镇"},{location:"蒋家桥",lngLat:[104.290992,30.579932],type:0,online:0,src:"http://159.75.169.224:7300/video.mp4",img:"excel_x_1.png",phone:"15294613646",specificLocaltion:"四川省成都市龙泉驿蒋家桥"},{location:"龙泉阳光城汽车客运站",lngLat:[104.307353,30.593994],type:2,online:1,src:"http://159.75.169.224:7300/video.mp4",img:"ygcqcz.png",phone:"15294613646",specificLocaltion:"四川省成都市龙泉驿龙泉阳光城汽车客运站"}]),Z=r([{img:o("sbjrs.png"),title:"设备接入数",num:132},{img:o("sbzxs.png"),title:"设备在线数",num:18},{img:o("sblis.png"),title:"设备离线数",num:6}]),C=r([{img:o("hdjk-icon.png"),title:"河道监控"},{img:o("fhjk-icon.png"),title:"防火监控"},{img:o("zhjk-icon.png"),title:"综治监控"}]),G=c(0),s=r([{expand:!0,title:"龙泉驿区",children:[{title:"龙泉街道",expand:!1,children:[{title:"百工堰社区",children:[{title:"王文"},{title:"林山"},{title:"文华"}]},{title:"星光社区"}]},{title:"大面街道",expand:!1},{title:"十陵街道",expand:!1},{title:"同安街道",expand:!1},{title:"洛带镇",expand:!1},{title:"洪安镇",expand:!1},{title:"山泉镇",expand:!1}]}]),y=r(["全部","当日","近30天","近90天","近一年"]),B=r([32,21,12,11,6,5,4.5,2,2,1]),Y=r({marker:"five-star.png",hdjkIcon:"hdjk-icon.png",fhjkIcon:"fhjk-icon.png",zhjkIcon:"zhjk-icon.png"}),J=r([{img:o("mv-5.png"),title:"西河河道监控"},{img:o("mv-4.png"),title:"西河东河道监控"}]),F=()=>{var i={grid:{top:"0",left:"0",right:"4.75%",bottom:"0",containLabel:!0},yAxis:[{type:"category",data:["龙泉街道","大面街道","十陵街道","同安街道","西河街道","柏合街道","东安街道","洛带镇","洪安镇","山泉镇"],inverse:!0,axisTick:{show:!1},axisLabel:{margin:20,fontSize:18,color:"#fff"},axisLine:{show:!1}}],xAxis:[{type:"value",axisLabel:{show:!1},axisLine:{show:!1},splitLine:{show:!1}}],series:[{type:"bar",barWidth:14,data:B,label:{normal:{show:!0,position:"insideBottomRight",formatter:"{c}%",distance:0,offset:[30,-2],color:"#fff",fontSize:16,padding:[5,15,10,15],backgroundColor:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAAA+CAYAAAD5wvNAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA0xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjQ3NTQ1RkVGOUM1MTFFOEJCQTdENzhFNjM5MzM3NkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjQ3NTQ1RkRGOUM1MTFFOEJCQTdENzhFNjM5MzM3NkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmE5M2UxZjIxLTQyMmYtMTE3Yy05MTVlLWVhNzA0NDUwYzIzOSIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmE5M2UxZjIxLTQyMmYtMTE3Yy05MTVlLWVhNzA0NDUwYzIzOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvulhDwAAAQ3SURBVHja7J1JaBRBGIX/iZEQN1CjwVxUcL+4hUnUU8SDHjQiiqJR0EOCYMAtIG4HRQXBBUQkXgQxxoOieJZ4UzO4oAe3CKJoQI2IGhUTZHz/dI12mul090xcJvU+ePSkpqsTXr1Ud81Ud8UW1SZFYuJgtsn0z+Iqd+2TFPHWGY1tFVSJ96ZgOx5lo7AdDBX9OmbMczx3mas8076BZQUhfoe3ns+xve/7/X6JcpyIZRK17u+2+I7tF5S/w+vneP0YuoXX16G33mMk5kkkCiV7RkLroNXQbE/Tk39HkdEIaDK00JTr//kd6Dx0FnqfzcELsqgzBjoCvYCOQuUMS14QM22lbfYSOgGV/cnAaG/UAD2FtkKD2QZ5yyBoE/QkfkMaoIF9HZiJerqDDkND6He/YYhp0wRCM62vAlMN3YZm0t9+ywyoNX5TluYamFroEjSMnlrR21xEaGqzDcxGqBEaQC+tQdu6MX4r1faRArPEXEUTOzkRb01lIFRgpkJN7Fms72maEJqpQYHR4VUzR0LEZKA5nug55PYGZjM0nV4Rg2Zhi19g9FO/vfSIeNiDXqYsU2B28lREfE5Nu7yBKYE20Bviw3r0MiXuwNRAxfSF+FBsMtIjMIT0xpp0YEZDs+gHCWC2XvxqYOYL57OQYDQjVRqYCnpBQlKugZlCH0hIJmtgJtAHEpKJGphS+kBCUqqBGUofSEiGFtADEgUGhjAwhIEhDAzJQ7o0MJ/pAwnJZw3MG/pAQvJBA/OMPpCQtGlgHtMHEpInGphW+kBCckcDo08mStILEoBmpCV90XuXfpAA7ibi0p7+HOYc/SAB6KPOxB2Yb/SE+KDZOOsOTAd0hr4QH87gdNThDoxyAOqkN8RDp8mGeAPTDu2jP8TDfr3YzRQY5Th0jx4Rg2bhmLvAG5huaCX0iV5Zj34pvQq9S3dvgVHaoLXQD3pmLdr2NYmK1DOZJSgwylWonr5ZSz3CcjXTG71NoDoF1bGnsa5nqUtUptpeogZGOQ0t5zWNNcPnFYk5qTaXbAOjXBFnUQOOnvov96EKhOVy0I5h5/TqhXClOI+u4lcI/Qdty91QPDFXHoapEGUSeBd0UJyFKnRs/oV+5y1foZPQJATlANQVtmI2dw28Fmf5m3Fmq4s2cT7N/096gS1ts7HiLH/zKupBclmRrcP0NCq9ob9KnGfN6NOjnSX8nCcwDmRb/VW6zQWss4SfyCNxZlXqRLmcJ/wX9tEfqX/IBaN84RC0I8dj6Opm22xKo803sulziZtyqK91t9tmms2B0XO6Ppv4WhZ1W0zdJANjFzo6qJZod07o/Odlpq4wMHYOMRdLuBv6dB9d1vejrWYxMA46olhktrnsw8BYhPYeC3x6j84IvRADYxEPMlyfZHOdw8BYhHsElB5JtdAWh0JakBH9jGW4OJ9UN9GO3/wUYAAaXtVsjsG1HQAAAABJRU5ErkJggg=="}}},itemStyle:{color:{x:1,y:0,x2:0,y2:0,colorStops:[{offset:0,color:"#57eabf"},{offset:1,color:"#2563f9"}]}}},{type:"bar",barWidth:14,barGap:"-100%",data:[100,100,100,100,100,100,100,100,100,100],itemStyle:{color:"#444a58"},zlevel:-1}]};let t=p.$refs.echart2;_.init(t).setOption(i)},X=()=>{let i={tooltip:{show:!0},grid:{top:"6%",left:"1%",right:"1%",bottom:"8%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLine:{show:!0,lineStyle:{color:"#233e64"}},axisLabel:{color:"#6a9cd5",margin:15},axisTick:{show:!1},data:["11","12","13","14","15","16","17"]}],yAxis:[{type:"value",splitNumber:7,splitLine:{lineStyle:{color:"#233e64"}},axisLine:{show:!1},axisLabel:{margin:20,color:"#6a9cd5"},axisTick:{show:!1}}],series:[{name:"服务频次",type:"line",symbolSize:0,lineStyle:{normal:{color:"#3deaff"}},areaStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(61,234,255, 0.9)"},{offset:.7,color:"rgba(61,234,255, 0)"}]}}},data:[90,105,84,125,110,92,98]}]},t=_.init(p.$refs.echart1);t.setOption(i),M(t,i)},H=()=>{let i="",t=[];E.forEach(n=>{n.type==0?i=`<div><img style="width: 42px;height: 58px" src="${o(Y.hdjkIcon)}"/></div>`:n.type==1?i=`<div><img style="width: 42px;height: 58px" src="${o(Y.fhjkIcon)}"/></div>`:i=`<div><img style="width: 42px;height: 58px" src="${o(Y.zhjkIcon)}"/></div>`,n.location==="龙泉驿区"&&(i=`<div><img src="${o(Y.marker)}"/></div>`);let h=new AMap.Marker({map:u.value,position:n.lngLat,content:i,extData:n});t.push(n),h.on("click",D=>{x.value=D.target.getExtData(),P(D.target)})}),v.commit("SETPOINTMARKER",t)},P=i=>{let t=i.getExtData(),n=` <div class="model">
                  <img class="pointLine" src="${o("pointLine.png")}"/>
            <div class="button" onclick="closeWindow()">
                <img src="${o("close-icon.png")}"/>
            </div>
            <div style="margin: 15px 10px">
                <div class="title">${t.location}监控</div>
            </div>
            <img onclick="play()" class="image" style="cursor: pointer" src="${o(t.img)}"/>
            <div class="location-text">
                <div>设备位置：<span>${t.specificLocaltion}</span></div>
                <div>在线状态：<span>${t.online?"在线":"离线"}</span></div>
            </div>
        </div>`,h=new AMap.InfoWindow({isCustom:!0,content:n,autoMove:!0,closeWhenClickMap:!0,offset:new AMap.Pixel(400,-172)});v.commit("SETINFOWINDOW",h),h.open(u.value,i.getPosition())},q=()=>{H(),X(),F()},$=i=>{i||(a.value=i)},Q=()=>{a.value=!1};return W(()=>{window.play=()=>{a.value=!0},se(()=>{u.value.on("click",Q),q()})}),ne(()=>{clearInterval(L.value),v.dispatch("resetMap"),u.value.off("click",Q),a.value=!1,window.play&&delete window.play}),(i,t)=>{const n=A("Option"),h=A("Select"),D=A("CarouselItem"),K=A("Carousel"),ee=A("Tree");return l(),m("div",ge,[e("div",fe,[e("div",_e,[f(S(I)),e("div",xe,[e("div",ye,[e("img",{src:S(o)("title-icon.png")},null,8,Ae),t[1]||(t[1]=N(" 近7日服务频次趋势 "))]),e("div",ke,null,512)])]),e("div",be,[e("div",Ie,[t[2]||(t[2]=e("div",{class:"title-content"},[e("div",null,"掉线故障排行"),e("div",null,"User distribution")],-1)),f(h,{class:"selector"},{default:k(()=>[(l(!0),m(R,null,z(y,(d,g)=>(l(),O(n,{value:d,key:g},{default:k(()=>[N(j(d),1)]),_:2},1032,["value"]))),128))]),_:1})]),e("div",we,[e("div",Me,[(l(!0),m(R,null,z(B,(d,g)=>(l(),m("div",{class:le(g<3?"rank":""),key:d},"No."+j(g),3))),128))]),e("div",Ge,null,512)])])]),e("div",Ye,[e("div",De,[t[4]||(t[4]=e("div",{class:"title-box"},[e("div",{class:"title-content"},[e("div",null,"雪亮工程"),e("div",null,"Plenty of engineering")])],-1)),f(K,{modelValue:G.value,"onUpdate:modelValue":t[0]||(t[0]=d=>G.value=d),autoplay:"",dots:"none",arrow:"hover"},{default:k(()=>[(l(!0),m(R,null,z(J,(d,g)=>(l(),O(D,{class:"carouse-item",key:g},{default:k(()=>[e("div",null,[e("img",{src:d.img,class:"carousel-img"},null,8,Se),e("div",je,j(d.title),1)])]),_:2},1024))),128))]),_:1},8,["modelValue"]),e("div",Le,[e("img",{src:S(o)("title-icon.png")},null,8,Ee),t[3]||(t[3]=N(" 街道列表 "))]),e("div",Ze,[f(ee,{data:s},null,8,["data"])])])]),f(S(w),{menuTopData:Z,menuBottomLeftData:C},null,8,["menuTopData","menuBottomLeftData"]),a.value?(l(),O(pe,{key:0,onIsClose:$,title:x.value.location+"监控"},{default:k(()=>[f(he,{"video-src":x.value.src},null,8,["video-src"])]),_:1},8,["title"])):ae("",!0)])}}},ze=U(Ce,[["__scopeId","data-v-65ebb735"]]);export{ze as default};
