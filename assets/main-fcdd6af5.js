import{u as b,_ as x,g as C,r as c,a as S,o as A,b as D,c as _,d as v,e as l,F as L,f as W,h as $,n as E,t as I}from"./index-28ae638b.js";function R(f){const a=b(),w=1920,h=1080;let i=null;const o={width:1,height:1},r=1,d=()=>{window.innerWidth/window.innerHeight<1||window.innerWidth/window.innerHeight>3||(o.width=((window.innerWidth+r)/w).toFixed(5),o.height=((window.innerHeight+r)/h).toFixed(5),f.style.transform=`scale(${o.width}, ${o.height})`,a.commit("SETSCALE",o))},p=()=>{i&&clearTimeout(i),i=setTimeout(()=>{d()},200)};return{calcRate:d,windowDraw:()=>{window.addEventListener("resize",p)}}}const T={class:"top-title"},z={class:"tab-box"},F=["onClick"],H={class:"map-container"},B={__name:"main",setup(f){const{proxy:a}=C(),w=c(["首页","应急广播","雪亮工程","公共服务"]),h=S(),i=b(),o=c(0),r=c(),d=c([104.280751,30.597593]),p=c(),g=()=>{let t=new AMap.Map("map",{center:d.value,zoom:11.5,viewMode:"2D",layers:[AMap.createDefaultLayer()],mapStyle:"amap://styles/darkblue"}),e=()=>{y(),t.off("complete",e)};i.commit("SETMAP",t),p.value=t,t.on("complete",e)},y=()=>{new AMap.DistrictSearch({level:"district",extensions:"all",subdistrict:0}).search("龙泉驿区",function(e,s){let u=[],n=s&&s.districtList&&s.districtList[0].boundaries;if(n){for(let m=0;m<n.length;m++){let k=new AMap.Polygon({path:n[m],strokeWeight:1,fillOpacity:.2,fillColor:"#1883f5",strokeColor:"#077efc"});u.push(k)}p.value.add(u)}})},M=t=>{o.value=t;let e="/main/page"+t;h.push(e)};return A(()=>{let t={"/main/page0":0,"/main/page1":1,"/main/page2":2,"/main/page3":3};console.log(a.$route.path,"============"),console.log(t[a.$route.path]),t[a.$route.path]&&(o.value=t[a.$route.path]);const{calcRate:e,windowDraw:s}=R(r.value);e(),s(),g(),window.closeWindow=()=>{i.state.infoWindow.close()}}),(t,e)=>{const s=D("router-view");return _(),v("div",{class:"contain",ref_key:"appRef",ref:r},[l("div",T,[e[0]||(e[0]=l("div",{class:"top-title-text"},"智慧广电综合公服信息管理平台-龙泉驿区",-1)),l("div",z,[(_(!0),v(L,null,W(w.value,(u,n)=>(_(),v("div",{class:E({"tab-item":!0,"tab-active":n===o.value}),key:n,onClick:m=>M(n)},I(u),11,F))),128))])]),l("div",H,[e[1]||(e[1]=l("div",{id:"map",class:"map"},null,-1)),$(s)])],512)}}},P=x(B,[["__scopeId","data-v-6d8446b8"]]);export{P as default};
